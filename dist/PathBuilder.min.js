!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PathBuilder",[],t):"object"==typeof exports?exports.PathBuilder=t():e.PathBuilder=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=51)}({10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function e(t){return function(n){function s(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,n,i));Object.assign(r.prototype,e.prototype),r.ui=t,r.scene=t.scene,r.x=n,r.y=i,r.ui.elements.push(r),r.scene.cameras.main.ignore(r);var a=1<<r.scene.cameras.cameras.length-1;return r.cameraFilter=a&~r.ui.camera._id,o(r,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),i(s,[{key:"update",value:function(){}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"click",value:function(){var e=this.callbackcontext,t=this.args;this.callbacks instanceof Array?this.callbacks.forEach(function(n,i){n.apply(e[i],t)}):this.callbacks.apply(this.callbackcontext,this.args)}},{key:"hover",value:function(){}},{key:"out",value:function(){}}]),s}()}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),r=(i=s)&&i.__esModule?i:{default:i};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(e,n,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,n.x,n.y,o));return r.default.call(l,e,n.x,n.y),l.setInteractive(),l.scene.input.setDraggable(l),l.setData("vector",n),l.scene.vectors.push(n),null!==i&&(l.curve=i,l.curve.controlpoints.push(l)),s&&(l.mapping=s),l.on("pointerout",function(e,t){this.scene.pointer.switchCursor(),this.scene.pointer.lbl.visible=!0}),l.on("drag",function(e,t){if(game.canvas.style.cursor="pointer",this.x=this.scene.pointer.x+this.scene.drawpanel.camera.scrollX,this.y=this.scene.pointer.y+this.scene.drawpanel.camera.scrollY,this.scene.pointer.lbl.visible=!1,this.data.get("vector").set(this.x,this.y),this.mapping){var n=this.mapping;for(var i in n.data)n.src[n.data[i].property]=n.data[i].operator(n.src,this[i])}this.scene.graphics.clear(),this.scene.draw()}),l.lbl=l.ui.add.label(l.x+10,l.y+10,"").setFontStyle(PathBuilder.UI.fonts.Point),a(l,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Image),o(t,[{key:"update",value:function(){this.lbl.x=this.x+10,this.lbl.y=this.y+10,this.lbl.setText("x: "+this.x+" y: "+this.y)}},{key:"destroy",value:function(){this.lbl.destroy(),function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}();t.default=l},51:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(52),r=(i=s)&&i.__esModule?i:{default:i};var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.scene=e,i.systems=e.sys,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Plugins.ScenePlugin),o(t,[{key:"boot",value:function(){var e=this.systems.events;e.on("shutdown",this.shutdown,this),e.on("destroy",this.destroy,this),this.systems.scenePlugin.add("UI",r.default,!0)}},{key:"shutdown",value:function(){}},{key:"destroy",value:function(){this.shutdown(),this.scene=void 0}}]),t}();t.default=a},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=r(n(53)),s=r(n(59));function r(e){return e&&e.__esModule?e:{default:e}}t.Scene=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.addEventListener&&(window.addEventListener("DOMMouseScroll",n.scroll,!1),window.onmousewheel=n.scroll.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Scene),i(t,[{key:"preload",value:function(){}},{key:"create",value:function(){this.tool={normal:null,draw:this.place},this.mode="normal",this.cursors={normal:"default",draw:"copy",select:"default",hand:"move"},this.curves={Line:Phaser.Curves.Line,Ellipse:Phaser.Curves.Ellipse,QuadraticBezier:Phaser.Curves.QuadraticBezier,CubicBezier:Phaser.Curves.CubicBezier,Spline:Phaser.Curves.Spline},this.events.emit("switchmode",this.mode),this.input.mouse.disableContextMenu(),this.W=this.cameras.main.width,this.H=this.cameras.main.height,this.drawmode="CubicBezier",this.vectors=[],this.spline=null,this.path=this.add.path(),this.path.segments=32,this.graphics=this.add.graphics(),this.drawpanel=new o.default(this),this.middle=new o.default(this),this.top=new o.default(this),this.graphics.fillStyle(16711680,1),this.graphics.fillCircle(10,10,8),this.graphics.generateTexture("endpoint",32,32),this.graphics.fillStyle(65280,1),this.graphics.fillCircle(10,10,8),this.graphics.generateTexture("controlpoint",32,32),this.graphics.clear(),this.hidebutton=this.top.add.text(10,300,"hide",null,null,null,[this.drawpanel.hide,this.middle.hide],[],[this.drawpanel,this.middle]),this.showbutton=this.top.add.text(10,350,"show",null,null,null,[this.drawpanel.show,this.middle.show],[],[this.drawpanel,this.middle]),this.viewbutton=this.top.add.text(this.W-100,.1*this.H,"reset view",null,null,null,this.resetView,[],this),this.drawbutton=this.middle.add.text(10,200,"draw",null,null,null,this.switchmode,["draw"],this),this.clearbutton=this.middle.add.text(10,100,"clear",null,null,null,this.clear,[],this),this.undobutton=this.middle.add.text(10,50,"undo",null,null,null,this.undo,[],this),this.importbutton=this.middle.add.text(this.W-100,this.H-200,"import",null,null,null,this.import,[],this),this.exportbutton=this.middle.add.text(this.W-100,this.H-100,"export",null,null,null,this.export,[],this),this.pausebutton=this.middle.add.text(10,this.H-200,"pause",null,null,null,this.freeze,[],this),this.resumebutton=this.middle.add.text(10,this.H-150,"resume",null,null,null,this.unfreeze,[],this),this.previewbutton=this.middle.add.text(10,this.H-100,"preview",null,null,null,this.preview,[],this),this.modelabel=this.middle.add.label(100,20,"mode: ",null,null,null,null,this),this.drawmodelabel=this.middle.add.label(400,20,"curve: "+this.drawmode,null,null,null,null,this),this.pointer=new s.default(this.middle,100,100,"controlpoint"),this.setCameras(),this.drawpanel.hide(),this.middle.hide()}},{key:"update",value:function(){this.drawpanel.update(),this.pointer.update()}},{key:"setCameras",value:function(){this.drawpanel.camera.ignore(this.middle.elements),this.drawpanel.camera.ignore(this.top.elements),this.middle.camera.ignore(this.graphics),this.middle.camera.ignore(this.drawpanel.elements),this.middle.camera.ignore(this.top.elements),this.top.camera.ignore(this.graphics),this.top.camera.ignore(this.middle.elements),this.top.camera.ignore(this.drawpanel.elements),this.cameras.main.ignore(this.children.list),this.supercamera=this.sys.game.scene.scenes[0].cameras.main}},{key:"switchmode",value:function(e){this.mode=e,this.modelabel.setText("mode: "+this.mode),this.pointer.switchCursor(),this.events.emit("switchmode",this.mode)}},{key:"clear",value:function(){var e=this;this.path.curves.forEach(function(t){e.undo()}),this.drawpanel.elements.forEach(function(e){e.destroy()}),this.vectors=[],this.drawpanel.elements=[],this.path.curves=[],this.spline=null,this.graphics.clear()}},{key:"undo",value:function(){if(this.vectors.length>1){var e=this;this.path.curves[this.path.curves.length-1].controlpoints.forEach(function(t){t.destroy(),e.vectors.pop()}),this.path.curves.pop(),this.spline=null,this.graphics.clear(),this.draw()}}},{key:"place",value:function(e,t,n){var i=new Phaser.Math.Vector2(t,n);if(0!=this.vectors.length){if("Line"==this.drawmode){this.spline=null;var o=this.vectors[this.vectors.length-1];if(this.vectors.length>0){var s=new this.curves[this.drawmode](o,i);this.path.add(s),s.controlpoints=[]}this.point=e.add.endpoint(i,s,"endpoint")}if("QuadraticBezier"==this.drawmode){this.spline=null;var r=new Phaser.Math.Vector2(t,n);o=this.vectors[this.vectors.length-1];r=(r=r.add(o)).divide(new Phaser.Math.Vector2(2,2));s=new this.curves[this.drawmode](o,r,i);this.path.add(s),s.controlpoints=[],this.point=e.add.controlpoint(r,s,"controlpoint"),this.point=e.add.endpoint(i,s,"endpoint")}if("CubicBezier"==this.drawmode){this.spline=null;var a=new Phaser.Math.Vector2(t,n),l=new Phaser.Math.Vector2(t,n);o=this.vectors[this.vectors.length-1];a.x=o.x+.25*(t-o.x),a.y=o.y+.25*(n-o.y),l.x=o.x+.75*(t-o.x),l.y=o.y+.75*(n-o.y);s=new this.curves[this.drawmode](o,a,l,i);this.path.add(s),s.controlpoints=[],this.point=e.add.controlpoint(a,s,"controlpoint"),this.point=e.add.controlpoint(l,s,"controlpoint"),this.point=e.add.endpoint(i,s,"endpoint")}if("Spline"==this.drawmode){o=this.vectors[this.vectors.length-1];if(null==this.spline){s=new this.curves[this.drawmode]([o.x,o.y,i.x,i.y]);this.spline=s,this.path.add(s),s.controlpoints=[]}this.path.segments+=8,1==this.vectors.length?this.point=e.add.controlpoint(i,this.spline,"controlpoint"):(this.point=e.add.controlpoint(i,this.spline,"controlpoint"),this.spline.addPoints([i.x,i.y])),this.spline.points[this.spline.points.length-1]=i,this.spline.points[this.spline.points.length-2]=o}if("Ellipse"==this.drawmode){this.spline=null;o=this.vectors[this.vectors.length-1],s=new this.curves[this.drawmode](i.x,i.y,100,100);this.path.add(s),s.controlpoints=[],s.p0=i;var c=new Phaser.Math.Vector2(i.x+100,i.y+100);this.point=e.add.endpoint(i,s,"endpoint"),this.point=e.add.controlpoint(c,s,"controlpoint",{src:s,data:{x:{property:"xRadius",operator:function(e,t){return e.p0.x-t}},y:{property:"yRadius",operator:function(e,t){return e.p0.y-t}}}});new Phaser.Math.Vector2(s.p0.x,s.p0.y+s.yRadius)}this.draw(),this.setCameras()}else this.point=e.add.endpoint(i,null,"endpoint")}},{key:"move",value:function(e,t){}},{key:"draw",value:function(){this.graphics.clear(),this.graphics.lineStyle(2,16777215,1),this.graphics.fillStyle(16777215,1),this.path.draw(this.graphics,this.path.segments)}},{key:"look",value:function(e){e.scrollY=this.pointer.lastY-this.input.activePointer.y,e.scrollX=this.pointer.lastX-this.input.activePointer.x}},{key:"scroll",value:function(e){var t=0;return e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t>0&&(game.canvas.style.cursor="zoom-in"),t<0&&(game.canvas.style.cursor="zoom-out"),this.time.delayedCall(250,this.pointer.switchCursor,[],this.pointer),this.drawpanel.camera.zoom+=.1*t,this.supercamera.zoom+=.1*t,t}},{key:"resetView",value:function(){this.drawpanel.camera.zoom=1,this.supercamera.zoom=1,this.drawpanel.camera.setScroll(0,0),this.supercamera.setScroll(0,0)}},{key:"freeze",value:function(){this.scene.manager.scenes[0].scene.pause()}},{key:"unfreeze",value:function(){this.scene.manager.scenes[0].scene.resume()}},{key:"importJSON",value:function(){var e=this.cache.json.get("data");this.path=this.path.fromJSON(e),this.draw()}},{key:"exportJON",value:function(){var e=JSON.stringify(this.path.toJSON());console.log(e);var t=new Blob([e],["data.json"]),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="data.json",i.click()}},{key:"preview",value:function(){if(0!==this.path.curves.length){var e=this.add.follower(this.path,0,0,"dude");this.cameras.main.ignore(e),this.middle.camera.ignore(e),this.top.camera.ignore(e),e.startFollow({duration:2e3,rotateToPath:!0,yoyo:!0,onComplete:function(e,t,n){n.destroy()},onCompleteParams:[e],ease:"Cubic.easeInOut"})}}},{key:"destroy",value:function(){}}]),t}()},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(54)),s=u(n(55)),r=u(n(23)),a=u(n(56)),l=u(n(57)),c=u(n(58));function u(e){return e&&e.__esModule?e:{default:e}}var h={Button:{fontFamily:"Arial",fontSize:16,color:"#00ff00"},Point:{fontFamily:"Arial",fontSize:12,color:"#00ff00"},EndPoint:{fontFamily:"Arial",fontSize:12,color:"#00ff00"},ControlPoint:{fontFamily:"Arial",fontSize:10,color:"#00ff00"},Label:{fontFamily:"Arial",fontSize:16,color:"#ffff00"}},d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.elements=[],this.add={menu:function(e,t){var n=new o.default(this.ui,e,t);return this.ui.scene.add.existing(n),n},text:function(e,t,n,i,o,r,a,l,c){var u=new s.default(this.ui,e,t,n,i,o,r,a,l,c);return this.ui.scene.add.existing(u),u},point:function(e,t,n,i){var o=new r.default(this.ui,e,t,n,i);return this.ui.scene.add.existing(o),o},endpoint:function(e,t,n,i){var o=new a.default(this.ui,e,t,n,i);return this.ui.scene.add.existing(o),o},controlpoint:function(e,t,n,i){var o=new l.default(this.ui,e,t,n,i);return this.ui.scene.add.existing(o),o},label:function(e,t,n,i,o,s,r){var a=new c.default(this.ui,e,t,n,i,o,s,r);return this.ui.scene.add.existing(a),a}},this.add.ui=this,this.camera=this.scene.cameras.add()}return i(e,[{key:"hide",value:function(){this.elements.forEach(function(e){e.visible=!1}),this.scene.switchmode("normal"),this.translate(0,this.scene.cameras.main.height,400,this.scene.unfreeze)}},{key:"show",value:function(){this.elements.forEach(function(e){e.visible=!0}),this.scene.switchmode("normal"),this.translate(0,0,400,this.scene.freeze)}},{key:"translate",value:function(e,t,n,i){this.scene.tweens.add({targets:this.camera,scrollX:e,scrollY:t,duration:n,ease:"Cubic.easeOut"}),this.scene.time.delayedCall(n,i,[],this.scene)}},{key:"update",value:function(){this.elements.forEach(function(e){e.update()})}},{key:"destroy",value:function(){this.elements.forEach(function(e){e.destroy()})}}],[{key:"fonts",get:function(){return h}}]),e}();t.default=d},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),r=(i=s)&&i.__esModule?i:{default:i};var a=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,n,i));return r.default.call(o,e,n,i),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Container),o(t,[{key:"add",value:function(e,t,n,i,o,s){return this[n]=this.ui.add.text(e,t,n,null,null,null,i,o,s).setFontStyle(PathBuilder.UI.fonts.Button),Phaser.GameObjects.Container.prototype.add.call(this,this[n]),this[n]}},{key:"update",value:function(){}},{key:"hide",value:function(){this.list.forEach(function(e){e.setVisible(!1)})}},{key:"show",value:function(){this.list.forEach(function(e){e.setVisible(!0)})}},{key:"divide",value:function(){}}]),t}();t.default=a},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),r=(i=s)&&i.__esModule?i:{default:i};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(e,n,i,o,s,l,c,u,h,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var f=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,n,i,o,PathBuilder.UI.fonts.Button));return r.default.call(f,e,n,i),f.target=c,f.callbacks=u,f.args=h,f.callbackcontext=d,f.tween=null,f.setInteractive(),f.on("pointerdown",function(e,t){this.click()}),f.on("pointerover",function(e,t){this.hover()}),f.on("pointerout",function(e,t){this.out()}),a(f,f)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Text),o(t,[{key:"click",value:function(){r.default.prototype.click.call(this),this.tween=this.scene.tweens.add({targets:this,scaleX:1.2,scaleY:1.2,duration:100,ease:"Linear",yoyo:!0})}},{key:"hover",value:function(){game.canvas.style.cursor="pointer",r.default.prototype.hover.call(this),this.setScale(1.1,1.1)}},{key:"out",value:function(){this.scene.pointer.switchCursor(),r.default.prototype.out.call(this),this.setScale(1,1)}}]),t}();t.default=l},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(23),s=(i=o)&&i.__esModule?i:{default:i};var r=function(e){function t(e,n,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o,s));return r.lbl.setFontStyle(PathBuilder.UI.fonts.EndPoint),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),t}();t.default=r},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(23),s=(i=o)&&i.__esModule?i:{default:i};var r=function(e){function t(e,n,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,o,s));return r.setScale(.75,.75),r.lbl.setFontStyle(PathBuilder.UI.fonts.ControlPoint),r.lbl.visible=!1,r.on("pointermove",function(e,t){this.lbl.visible=!0}),r.on("pointerout",function(e,t){this.lbl.visible=!1}),r.on("dragend",function(e,t){this.lbl.visible=!1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),t}();t.default=r},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(10),s=(i=o)&&i.__esModule?i:{default:i};function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(e,n,i,o,a,l,c,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,n,i,o,PathBuilder.UI.fonts.Label));return s.default.call(h,e,n,i),h.target=a,h.callbacks=l,h.callbackcontext=u,h.args=c,h.tween=null,h.setInteractive(),r(h,h)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Text),t}();t.default=a},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),r=(i=s)&&i.__esModule?i:{default:i};var a=function(e){function t(e,n,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.scene,n,i,o));return r.default.call(a,e,n,i),a.alpha=.5,a.snap=50,a.scene.input.on("pointerdown",function(e,t){if("draw"==this.scene.mode&&0==e.dragState&&e.leftButtonDown()&&0==t.length&&e.x>50&&e.x<this.scene.W-100){var n=this.scene.drawpanel.camera.scrollX,i=this.scene.drawpanel.camera.scrollY;this.scene.place(this.scene.drawpanel,this.x+n,this.y+i)}e.rightButtonDown()&&0==e.dragState&&(this.lockX=e.x,this.lockY=e.y,this.scene.switchmode("select")),e.middleButtonDown()&&(this.lastX=e.x+this.scene.drawpanel.camera.scrollX,this.lastY=e.y+this.scene.drawpanel.camera.scrollY,this.scene.switchmode("hand"))},a),a.scene.input.on("pointerup",function(e,t){e.middleButtonDown()&&this.scene.switchmode("normal")},a),a.snapkey=a.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),a.lbl=a.ui.add.label(n+20,i+20,"").setFontStyle(PathBuilder.UI.fonts.Label),a.menu=a.ui.add.menu(n,i),a.menu.add(-50,-50,"Line",a.switchdrawmode,["Line"],a),a.menu.add(0,-50,"Quadratic",a.switchdrawmode,["Quadratic"],a),a.menu.add(50,-50,"Cubic",a.switchdrawmode,["Cubic"],a),a.menu.add(-50,50,"Spline",a.switchdrawmode,["Spline"],a),a.menu.add(0,50,"Ellipse",a.switchdrawmode,["Ellipse"],a),a.scene.events.on("switchmode",a.switchmode,a),a.scene.add.existing(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.GameObjects.Image),o(t,[{key:"switchmode",value:function(e){"draw"==e&&(this.setVisible(!0),this.lbl.setVisible(!0),this.menu.hide()),"normal"==e&&(this.setVisible(!1),this.menu.hide()),"select"==e&&(this.setVisible(!1),this.menu.setPosition(this.x,this.y),this.menu.show()),"hand"==e&&(game.canvas.style.cursor="grab",this.setVisible(!0),this.lbl.setVisible(!0))}},{key:"switchCursor",value:function(){game.canvas.style.cursor=this.scene.cursors[this.scene.mode]}},{key:"switchdrawmode",value:function(e){this.scene.drawmode=e,this.scene.drawmodelabel.setText("curve: "+e),this.menu.hide(),this.scene.switchmode("draw")}},{key:"update",value:function(){this.x=this.scene.input.activePointer.x,this.y=this.scene.input.activePointer.y,"hand"==this.scene.mode&&(this.scene.look(this.scene.drawpanel.camera),this.scene.look(this.scene.supercamera)),"select"==this.scene.mode&&Phaser.Math.Distance.Between(this.x,this.y,this.lockX,this.lockY)>150&&this.scene.switchmode("draw"),"select"!==this.scene.mode&&(this.snapkey.isDown&&(this.x=Math.round(this.x/this.snap)*this.snap,this.y=Math.round(this.y/this.snap)*this.snap),this.lbl.setPosition(this.x+20,this.y+20),this.lbl.setText("x: "+this.x+" y: "+this.y))}}]),t}();t.default=a}})});